/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/about.js":
/*!**********************!*\
  !*** ./src/about.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showAaboutPage\": () => (/* binding */ showAaboutPage)\n/* harmony export */ });\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n\r\n\r\nlet aboutTemplate = () => _lib_js__WEBPACK_IMPORTED_MODULE_0__.html`<sector class=\"about-page\">\r\n  <div class=\"about-box\">\r\n    <div class=\"about-info\">\r\n      <div class=\"about-title\">Chat Application</div>\r\n      <div class=\"about-description\">\r\n        This application was created to be used in\r\n        <b\r\n          >The Second National Conference \"Information Technology and\r\n          Automation\" 2023</b\r\n        >. It is meant to showcase the usage of\r\n        <a href=\"https://firebase.google.com/\">FireBase</a> for the database,\r\n        <a href=\"https://visionmedia.github.io/page.js/\">Page.js</a> for routing\r\n        through the SPA,\r\n        <a href=\"https://lit.dev/docs/v1/lit-html/introduction/\">lit-html</a>\r\n        for rendering HTML templates. The source code can be found at\r\n        <a href=\"https://github.com/KrisDevBG/chatApp\">GitHub</a>. Feel free to\r\n        use the source code and modify it however you like, but when publishing\r\n        your version you must credit this one. If you have any questions or\r\n        suggestions, please feel free to contact me on one of the listed social\r\n        medias at the top of the page.\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"about-box\">\r\n    <div class=\"about-leftimg\">\r\n      <img src=\"./chatApp/images/default-user.png\" alt=\"\" />\r\n    </div>\r\n    <div class=\"about-rightblock\">\r\n      <div class=\"about-title\">\r\n        Application Developer\r\n        <span class=\"about-name\"> - Kristiyan Petsanov</span>\r\n      </div>\r\n      <div class=\"about-description\">\r\n        Kristiyan is a fourth year Software Engineering student. He has been\r\n        studying JavaScript for 2 years now. He is currently unemployed, focused\r\n        on his studies, although he is actively looking for a job. Kristiyan is\r\n        most passionate about Web Developing in general. He likes both Back-End\r\n        and Front-End Development. He is mainly studying JS (at SoftUni) and C#\r\n        (at school).\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"about-box\">\r\n    <div class=\"about-leftblock\">\r\n      <div class=\"about-title\">\r\n        Mentor/Teacher\r\n        <span class=\"about-name\"> - Nadezhda Manchevska</span>\r\n      </div>\r\n      <div class=\"about-description\">\r\n        Nadezhda is an Informatics teacher at PGIT \"Prof. D-r Asen Zlatarov\",\r\n        Petrich. She is mainly teaching Web Design and C# OOP. She was\r\n        Kristiyan's Mentor in different coding competitions. She has been real\r\n        support for him throughout his years of studying.\r\n      </div>\r\n    </div>\r\n    <div class=\"about-rightimg\">\r\n      <img src=\"./chatApp/images/default-user.png\" alt=\"\" />\r\n    </div>\r\n  </div>\r\n</sector>`;\r\n\r\nfunction showAaboutPage(ctx) {\r\n  ctx.render(aboutTemplate());\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/about.js?");

/***/ }),

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _homePage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./homePage.js */ \"./src/homePage.js\");\n/* harmony import */ var _login_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./login.js */ \"./src/login.js\");\n/* harmony import */ var _myChats_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./myChats.js */ \"./src/myChats.js\");\n/* harmony import */ var _register_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./register.js */ \"./src/register.js\");\n/* harmony import */ var _settings_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./settings.js */ \"./src/settings.js\");\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n/* harmony import */ var _nav_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./nav.js */ \"./src/nav.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _about_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./about.js */ \"./src/about.js\");\n/* harmony import */ var _error_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./error.js */ \"./src/error.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet main = document.querySelector(\"main\");\r\n\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(decorateContenxt);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/index.html\", \"/\");\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/\", _homePage_js__WEBPACK_IMPORTED_MODULE_0__.showHomePage);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/mychats\", _myChats_js__WEBPACK_IMPORTED_MODULE_2__.showChatsPage);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/login\", _login_js__WEBPACK_IMPORTED_MODULE_1__.showLoginPage);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/register\", _register_js__WEBPACK_IMPORTED_MODULE_3__.showRegisterPage);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/settings\", _settings_js__WEBPACK_IMPORTED_MODULE_4__.showSettingsPage);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/about\", _about_js__WEBPACK_IMPORTED_MODULE_8__.showAaboutPage);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/settings/username\", (e) => settingsPage(e, \"username-option-page\"));\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/settings/pinformation\", (e) =>\r\n  settingsPage(e, \"pinformation-option-page\")\r\n);\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/settings/account\", (e) => settingsPage(e, \"account-option-page\"));\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"/settings/actions\", (e) => settingsPage(e, \"account-actions-page\"));\r\n(0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.page)(\"*\", _error_js__WEBPACK_IMPORTED_MODULE_9__.showErrorPage);\r\n\r\n(0,_nav_js__WEBPACK_IMPORTED_MODULE_6__.showNav)();\r\n_lib_js__WEBPACK_IMPORTED_MODULE_5__.page.start();\r\n\r\nfunction decorateContenxt(ctx, next) {\r\n  ctx.render = renderMain;\r\n  ctx.updateNav = _nav_js__WEBPACK_IMPORTED_MODULE_6__.showNav;\r\n  (0,_nav_js__WEBPACK_IMPORTED_MODULE_6__.showNav)();\r\n  next();\r\n}\r\n\r\nfunction renderMain(content) {\r\n  (0,_lib_js__WEBPACK_IMPORTED_MODULE_5__.render)(content, main);\r\n}\r\n\r\nfunction settingsPage(e, page) {\r\n  (0,_settings_js__WEBPACK_IMPORTED_MODULE_4__.selectOption)(e);\r\n  (0,_settings_js__WEBPACK_IMPORTED_MODULE_4__.showPage)(page);\r\n}\r\n\r\n// window.onload = function () {\r\n//   document\r\n//     .getElementById(\"user-menu\")\r\n//     .addEventListener(\"click\", toggleUserMenu);\r\n//   document.getElementById(\"logout\").addEventListener(\"click\", logoutUser);\r\n//   document.getElementById(\"register-text\").addEventListener(\"click\", () => {\r\n//     page.redirect(\"/register\");\r\n//   });\r\n//   document.getElementById(\"sign-in-text\").addEventListener(\"click\", () => {\r\n//     page.redirect(\"/login\");\r\n//   });\r\n//   document\r\n//     .getElementById(\"save-username\")\r\n//     .addEventListener(\"click\", saveUsername);\r\n//   document.getElementById(\"save-email\").addEventListener(\"click\", saveEmail);\r\n//   document\r\n//     .getElementById(\"save-password\")\r\n//     .addEventListener(\"click\", savePassword);\r\n//   document\r\n//     .getElementById(\"delete-account\")\r\n//     .addEventListener(\"click\", deleteAccount);\r\n// };\r\n\n\n//# sourceURL=webpack://chatapp/./src/app.js?");

/***/ }),

/***/ "./src/data/api.js":
/*!*************************!*\
  !*** ./src/data/api.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"del\": () => (/* binding */ del),\n/* harmony export */   \"get\": () => (/* binding */ get),\n/* harmony export */   \"post\": () => (/* binding */ post),\n/* harmony export */   \"put\": () => (/* binding */ put)\n/* harmony export */ });\nconst host =\r\n  \"https://chat-app-22f2e-default-rtdb.europe-west1.firebasedatabase.app\";\r\n\r\nasync function request(method, url, data) {\r\n  try {\r\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\n    const options = {\r\n      method,\r\n      headers: {},\r\n    };\r\n\r\n    if (userData != null) {\r\n      options.headers[\"X-Authorization\"] = userData.accessToken;\r\n    }\r\n    if (data != undefined) {\r\n      options.headers[\"Content-Type\"] = \"application/json\";\r\n      options.body = JSON.stringify(data);\r\n    }\r\n\r\n    const response = await fetch(host + url + \"/.json\", options);\r\n\r\n    let result;\r\n    result = await response.json();\r\n\r\n    if (response.ok == false) {\r\n      if (response.status == 403) {\r\n        localStorage.removeItem(\"userData\");\r\n      }\r\n      const error = result;\r\n      throw error;\r\n    }\r\n\r\n    return result;\r\n  } catch (err) {\r\n    alert(err.message);\r\n    throw err;\r\n  }\r\n}\r\n\r\nconst get = request.bind(null, \"get\");\r\nconst post = request.bind(null, \"post\");\r\nconst put = request.bind(null, \"put\");\r\nconst del = request.bind(null, \"delete\");\r\n\n\n//# sourceURL=webpack://chatapp/./src/data/api.js?");

/***/ }),

/***/ "./src/data/user.js":
/*!**************************!*\
  !*** ./src/data/user.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loginUser\": () => (/* binding */ loginUser),\n/* harmony export */   \"logoutUser\": () => (/* binding */ logoutUser),\n/* harmony export */   \"registerUser\": () => (/* binding */ registerUser)\n/* harmony export */ });\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib.js */ \"./src/lib.js\");\n/* harmony import */ var _nav_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nav.js */ \"./src/nav.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./api.js */ \"./src/data/api.js\");\n\r\n\r\n\r\n\r\n\r\nasync function loginUser(email, password) {\r\n  let users = await (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.get)(\"/chatApp/users\");\r\n  let user = null;\r\n  let userId = null;\r\n  for (const [userIdd, userInfo] of Object.entries(users)) {\r\n    if (userInfo.email === email && userInfo.password === password) {\r\n      user = userInfo;\r\n      userId = userIdd;\r\n    }\r\n  }\r\n\r\n  if (user != null) {\r\n    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setUserData)({\r\n      email: user.email,\r\n      username: user.username,\r\n      password: user.password,\r\n      img: user.img,\r\n      chats: user.chats,\r\n      id: userId,\r\n    });\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nasync function registerUser(email, password, username) {\r\n  let user = await (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.post)(\"/chatApp/users\", { email, password, username });\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setUserData)({\r\n    email,\r\n    username,\r\n    img: \"\",\r\n    chats: [],\r\n    id: user.name,\r\n  });\r\n  return true;\r\n}\r\n\r\nasync function logoutUser() {\r\n  localStorage.clear();\r\n  (0,_nav_js__WEBPACK_IMPORTED_MODULE_1__.showNav)();\r\n  _lib_js__WEBPACK_IMPORTED_MODULE_0__.page.redirect(\"/\");\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/data/user.js?");

/***/ }),

/***/ "./src/error.js":
/*!**********************!*\
  !*** ./src/error.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showErrorPage\": () => (/* binding */ showErrorPage)\n/* harmony export */ });\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n\r\n\r\nlet errorTemplate = () => _lib_js__WEBPACK_IMPORTED_MODULE_0__.html`<sector class=\"error-page\">\r\n  <div class=\"err-code\">404</div>\r\n  <div class=\"err-msg\">Page not found!</div>\r\n</sector>`;\r\n\r\nfunction showErrorPage(ctx) {\r\n  ctx.render(errorTemplate());\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/error.js?");

/***/ }),

/***/ "./src/homePage.js":
/*!*************************!*\
  !*** ./src/homePage.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showHomePage\": () => (/* binding */ showHomePage)\n/* harmony export */ });\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n\r\n\r\nlet homeTemplate = () => _lib_js__WEBPACK_IMPORTED_MODULE_0__.html`<sector class=\"home-page\">\r\n  <div class=\"left-side\">\r\n    <div class=\"main-text\">\r\n      Have your <br />\r\n      best chat\r\n    </div>\r\n    <div class=\"desc-text\">Fast. Easy. Unlimited Chats.</div>\r\n    <div class=\"home-buttons\">\r\n      <a href=\"/register\"><span>Try it for free</span></a>\r\n      <a href=\"/login\"><span>Already a member?</span></a>\r\n    </div>\r\n  </div>\r\n  <div class=\"right-side\">\r\n    <img src=\"./chatApp/images/dog-chatting.png\" alt=\"\" class=\"chat-dog\" />\r\n  </div>\r\n</sector>`;\r\n\r\nfunction showHomePage(ctx) {\r\n  ctx.render(homeTemplate());\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/homePage.js?");

/***/ }),

/***/ "./src/lib.js":
/*!********************!*\
  !*** ./src/lib.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"html\": () => (/* reexport safe */ _node_modules_lit_html_lit_html_js__WEBPACK_IMPORTED_MODULE_0__.html),\n/* harmony export */   \"nothing\": () => (/* reexport safe */ _node_modules_lit_html_lit_html_js__WEBPACK_IMPORTED_MODULE_0__.nothing),\n/* harmony export */   \"page\": () => (/* reexport safe */ _node_modules_page_page_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   \"render\": () => (/* reexport safe */ _node_modules_lit_html_lit_html_js__WEBPACK_IMPORTED_MODULE_0__.render)\n/* harmony export */ });\n/* harmony import */ var _node_modules_lit_html_lit_html_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../node_modules/lit-html/lit-html.js */ \"./node_modules/lit-html/lit-html.js\");\n/* harmony import */ var _node_modules_page_page_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../node_modules/page/page.mjs */ \"./node_modules/page/page.mjs\");\n\r\n\r\n\n\n//# sourceURL=webpack://chatapp/./src/lib.js?");

/***/ }),

/***/ "./src/login.js":
/*!**********************!*\
  !*** ./src/login.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showLoginPage\": () => (/* binding */ showLoginPage)\n/* harmony export */ });\n/* harmony import */ var _data_user_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/user.js */ \"./src/data/user.js\");\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\n\r\nlet loginTemplate = (onLogin) => _lib_js__WEBPACK_IMPORTED_MODULE_1__.html`<sector class=\"login-page\">\r\n  <form @submit=${onLogin} id=\"login-form\">\r\n    <h1>Sign In</h1>\r\n    <span>Having a profile is required to use the chat.</span>\r\n    <div class=\"single-input\">\r\n      <span><i class=\"fas fa-user\"></i></span>\r\n      <input type=\"email\" name=\"email\" placeholder=\"Email\" />\r\n    </div>\r\n    <div class=\"single-input\">\r\n      <span><i class=\"fas fa-unlock\"></i></span>\r\n      <input type=\"password\" name=\"password\" placeholder=\"Password\" />\r\n    </div>\r\n\r\n    <div class=\"single-input submit-btn\">\r\n      <input type=\"submit\" value=\"Login\" />\r\n    </div>\r\n    <span\r\n      >Don't have an account?\r\n      <a href=\"/register\" id=\"register-text\">Register</a></span\r\n    >\r\n  </form>\r\n</sector>`;\r\n\r\nfunction showLoginPage(ctx) {\r\n  ctx.render(loginTemplate((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.createSubmitHandler)(onLogin)));\r\n\r\n  async function onLogin({ email, password }) {\r\n    if (email == \"\" || password == \"\")\r\n      return (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"All fields are required.\", \"red\");\r\n    let logged = await (0,_data_user_js__WEBPACK_IMPORTED_MODULE_0__.loginUser)(email, password);\r\n    ctx.updateNav();\r\n    if (logged) return ctx.page.redirect(\"/\");\r\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"Wrong email or password.\", \"red\");\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/login.js?");

/***/ }),

/***/ "./src/myChats.js":
/*!************************!*\
  !*** ./src/myChats.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showChatsPage\": () => (/* binding */ showChatsPage)\n/* harmony export */ });\n/* harmony import */ var _data_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/api.js */ \"./src/data/api.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n\r\n\r\n\r\nlet contextElement = null;\r\nlet isEditing = false;\r\nlet editingMessageId = null;\r\nlet currentInterval = null;\r\n\r\nlet chatsTemplate = (chats, chatsNames, user) => _lib_js__WEBPACK_IMPORTED_MODULE_2__.html`<sector\r\n  class=\"chats-page\"\r\n>\r\n  <div class=\"message-menu\">\r\n    <a @click=${editMessage} href=\"javascript:void(0)\" class=\"mm-option\"\r\n      >Edit</a\r\n    >\r\n    <a @click=${deleteMessage} href=\"javascript:void(0)\" class=\"mm-option\"\r\n      >Delete</a\r\n    >\r\n  </div>\r\n\r\n  <div class=\"my-chats\">\r\n  <div class=\"chat-menu\">\r\n    <span>Join Chat</span>\r\n    <input\r\n      type=\"text\"\r\n      name=\"chat-name\"\r\n      id=\"chat-name\"\r\n      placeholder=\"Chat Name...\"\r\n    />\r\n    <input\r\n      type=\"password\"\r\n      name=\"chat-pass\"\r\n      id=\"chat-pass\"\r\n      placeholder=\"Chat Password...\"\r\n    />\r\n    <button @click=${actionChat}  id=\"chat-submit\">Join</@button>\r\n  </div>\r\n    <div class=\"chats-header\">My Chats</div>\r\n    <div @click=${chatsClick} class=\"chats\">\r\n      ${\r\n        chats.length > 0\r\n          ? chats.map((e) =>\r\n              chatTemplate(e, user, chatsNames[chats.indexOf(e)])\r\n            )\r\n          : null\r\n      }\r\n    </div>\r\n    <div class=\"chat-manager\">\r\n      <button @click=${toggleChatMenu} class=\"action-chat\">\r\n        Join <i class=\"fa-solid fa-right-to-bracket\"></i>\r\n      </button>\r\n      <button @click=${toggleChatMenu} class=\"action-chat\">\r\n        Create <i class=\"fa-solid fa-plus\"></i>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div class=\"chat-page\">\r\n    <div class=\"chat-header\">\r\n      <i class=\"fa-solid fa-hashtag\"></i>\r\n      <span>Select Chat</span>\r\n      <div class=\"refresh-text\">Chat Refresh: 00:<text id=\"refresh-seconds\">15</text></div>\r\n    </div>\r\n    <div class=\"chat-main\"></div>\r\n    <div class=\"chat-input\">\r\n      <div class=\"input-field\">\r\n        <i\r\n          class=\"fa-solid fa-circle-plus add-file\"\r\n          @click=${() => document.getElementById(\"file-input\").click()}\r\n        ></i>\r\n        <input @change=${onChangeFile} id=\"file-input\" accept=\"image/*\"  type=\"file\" name=\"name\" style=\"display: none\" />\r\n        <input\r\n          type=\"text\"\r\n          name=\"message\"\r\n          id=\"message-input\"\r\n          @keyup=${(e) => {\r\n            if (e.key === \"Enter\" || e.keyCode === 13) {\r\n              if (isEditing) {\r\n                editMessageSend(e.target.value);\r\n                isEditing = false;\r\n                editingMessageId = null;\r\n                return;\r\n              }\r\n              sendMessage(e.target.value);\r\n              e.target.value = \"\";\r\n            }\r\n          }}\r\n          placeholder=\"Select a chat to message in...\"\r\n        />\r\n        <i\r\n          @click=${toggleEmojiMenu}\r\n          class=\"fa-solid fa-face-smile add-emoji\"\r\n          id=\"add-emoji\"\r\n        ></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</sector>`;\r\n\r\nlet chatTemplate = (chat, user, chatId) => {\r\n  return _lib_js__WEBPACK_IMPORTED_MODULE_2__.html`<div data-id=${chatId} class=\"chat-option\">\r\n    <i class=\"fa-solid fa-hashtag left-items\"></i> <span>${chat.name}</span>\r\n    ${user && user.id == chat.ownerId\r\n      ? _lib_js__WEBPACK_IMPORTED_MODULE_2__.html`<i\r\n          @click=${deleteChat}\r\n          class=\"fa-solid fa-trash right-items delete\"\r\n        ></i>`\r\n      : _lib_js__WEBPACK_IMPORTED_MODULE_2__.html`<i\r\n          @click=${leaveChat}\r\n          class=\"fa-solid fa-right-from-bracket delete right-items leave\"\r\n        ></i>`}\r\n  </div>`;\r\n};\r\n\r\nasync function getChats(chats) {\r\n  let newChats = [];\r\n  for (const chat of chats) {\r\n    let chatInfo = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(`/chatApp/chats/${chat}`);\r\n    chatInfo ? newChats.push(chatInfo) : null;\r\n  }\r\n  return newChats;\r\n}\r\n\r\nasync function showChatsPage(ctx) {\r\n  let userData = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getUserData)();\r\n  let user = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(`/chatApp/users/${userData.id}`);\r\n  let userChatsNames = user.chats || [];\r\n  let userChats = await getChats(userChatsNames);\r\n  ctx.render(chatsTemplate(userChats, userChatsNames, user));\r\n\r\n  $(document).bind(\"click\", function (event) {\r\n    document.querySelector(\".message-menu\").style.display = \"none\";\r\n    contextElement = null;\r\n  });\r\n\r\n  document\r\n    .querySelector(\"emoji-picker\")\r\n    .removeEventListener(\"emoji-click\", emojiClick);\r\n  document\r\n    .querySelector(\"emoji-picker\")\r\n    .addEventListener(\"emoji-click\", emojiClick);\r\n}\r\n\r\nfunction emojiClick(event) {\r\n  document.querySelector(\"#message-input\").value += event.detail.unicode;\r\n}\r\n\r\nfunction onChangeFile(e) {\r\n  let input = this;\r\n  if (input.files && input.files[0]) {\r\n    var reader = new FileReader();\r\n\r\n    reader.onload = function (e) {\r\n      sendMessage(URL.createObjectURL(input.files[0]));\r\n    };\r\n\r\n    reader.readAsDataURL(input.files[0]);\r\n  }\r\n}\r\n\r\nfunction chatsClick(e) {\r\n  if (e.target.classList.contains(\"chat-option\")) {\r\n    Array.from(document.querySelectorAll(\".chat-option\")).forEach((c) =>\r\n      c.classList.remove(\"selected-chat\")\r\n    );\r\n    e.target.classList.add(\"selected-chat\");\r\n  } else if (e.target.parentElement.classList.contains(\"chat-option\")) {\r\n    Array.from(document.querySelectorAll(\".chat-option\")).forEach((c) =>\r\n      c.classList.remove(\"selected-chat\")\r\n    );\r\n    e.target.parentElement.classList.add(\"selected-chat\");\r\n  }\r\n  loadChat(e);\r\n}\r\n\r\nlet emojiShown = false;\r\nfunction toggleEmojiMenu() {\r\n  let emojiMenu = document.querySelector(\".emoji-menu\");\r\n  if (emojiShown) {\r\n    emojiShown = false;\r\n    emojiMenu.style.display = \"none\";\r\n  } else {\r\n    emojiShown = true;\r\n    emojiMenu.style.display = \"block\";\r\n  }\r\n}\r\n\r\nlet chatShown = false;\r\nfunction toggleChatMenu(e) {\r\n  let chatMenu = document.querySelector(\".chat-menu\");\r\n  if (!chatShown) {\r\n    chatMenu.style.display = \"flex\";\r\n    chatShown = true;\r\n    if (e.target.textContent.trim() == \"Join\") {\r\n      document.querySelector(\".chat-menu span\").textContent = \"Join Chat\";\r\n      document.getElementById(\"chat-submit\").textContent = \"Join\";\r\n    } else {\r\n      document.querySelector(\".chat-menu span\").textContent = \"Create Chat\";\r\n      document.getElementById(\"chat-submit\").textContent = \"Create\";\r\n    }\r\n  } else {\r\n    chatMenu.style.display = \"none\";\r\n    chatShown = false;\r\n  }\r\n}\r\n\r\nfunction actionChat(e) {\r\n  if (e.target.textContent == \"Join\") {\r\n    joinChat();\r\n  } else {\r\n    createChat();\r\n  }\r\n}\r\n\r\nasync function createChat() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  let chatName = document.getElementById(\"chat-name\").value;\r\n  let chatPass = document.getElementById(\"chat-pass\").value;\r\n  if (chatName == \"\" || chatPass == \"\") {\r\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"All fields are required!\", \"red\");\r\n  }\r\n  let currentChats = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(\"/chatApp/chats\");\r\n  if (currentChats != undefined) {\r\n    for (const [chatId, chatInfo] of Object.entries(currentChats)) {\r\n      if (chatInfo.name == chatName && chatInfo.password == chatPass) {\r\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"Room already exists.\", \"red\");\r\n      }\r\n    }\r\n  }\r\n  await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.post)(\"/chatApp/chats\", {\r\n    name: chatName,\r\n    password: chatPass,\r\n    ownerId: userData.id,\r\n    messages: [],\r\n  });\r\n  refreshChats();\r\n  return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"Chat created successfully.\", \"green\");\r\n}\r\n\r\nasync function joinChat() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  let chatName = document.getElementById(\"chat-name\").value;\r\n  let chatPass = document.getElementById(\"chat-pass\").value;\r\n  if (chatName == \"\" || chatPass == \"\") {\r\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"All fields are required!\", \"red\");\r\n  }\r\n  let currentChats = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(\"/chatApp/chats\");\r\n  for (const [chatId, chatInfo] of Object.entries(currentChats)) {\r\n    if (chatInfo.name == chatName && chatInfo.password == chatPass) {\r\n      let newChats = userData.chats || [];\r\n      if (!newChats.includes(chatId)) {\r\n        newChats.push(chatId);\r\n        await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.put)(`/chatApp/users/${userData.id}`, {\r\n          email: userData.email,\r\n          username: userData.username,\r\n          password: userData.password,\r\n          img: userData.img,\r\n          id: userData.id,\r\n          chats: newChats,\r\n        });\r\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.reloadUserData)();\r\n        refreshChats();\r\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"Successfully joined chat.\", \"green\");\r\n      } else {\r\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"You are already in this chat.\", \"red\");\r\n      }\r\n    }\r\n  }\r\n\r\n  return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"Chat not found.\", \"red\");\r\n}\r\n\r\nasync function loadChat(e, newId) {\r\n  let id = null;\r\n  if (e != undefined) {\r\n    id =\r\n      e.target.getAttribute(\"data-id\") ||\r\n      e.target.parentElement.getAttribute(\"data-id\");\r\n  } else {\r\n    id = document.querySelector(\".chat-page\").getAttribute(\"data-id\");\r\n  }\r\n  if (newId) id = newId;\r\n\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  if (id != null) {\r\n    let chatPage = document.querySelector(\".chat-page\");\r\n    chatPage.setAttribute(\"data-id\", id);\r\n    let chatInfo = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(`/chatApp/chats/${id}`);\r\n    let messages = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(`/chatApp/chats/${id}/messages`);\r\n    let chatMessages = chatPage.querySelector(\".chat-main\");\r\n    chatMessages.innerHTML = \"\";\r\n    chatPage.querySelector(\".chat-header span\").textContent = chatInfo.name;\r\n    chatPage\r\n      .querySelector(\"#message-input\")\r\n      .setAttribute(\"placeholder\", `Message #${chatInfo.name}`);\r\n\r\n    for (const [msgId, msgContent] of Object.entries(messages)) {\r\n      let div = document.createElement(\"div\");\r\n      div.setAttribute(\"class\", \"chat-message\");\r\n      div.setAttribute(\"data-id\", msgId);\r\n      let sendDate = new Date(msgContent.sendDate);\r\n      let urlFied = urlify(msgContent.content);\r\n      if (urlFied.includes(\"http\") || urlFied.includes(\"data:image\"))\r\n        div.style.height = \"330px\";\r\n      div.innerHTML = `\r\n              <img\r\n                  class=\"message-avatar\"\r\n                  src=\"${msgContent.senderImage || \"/images/default-user.png\"}\"\r\n                  alt=\"\"\r\n              />\r\n              <div class=\"message-sender\">\r\n                  <div class=\"sender\">${\r\n                    msgContent.senderName\r\n                  } <span>${sendDate.getDate()}/${sendDate.getMonth()}/${sendDate.getFullYear()} - ${sendDate.getHours()}:${sendDate.getMinutes()}</span></div>\r\n                  ${\r\n                    urlify(msgContent.content).includes(\"http\") ||\r\n                    urlFied.includes(\"data:image\")\r\n                      ? `<div\r\n                          class=\"message\"\r\n                          style=\"height: 300px!important; width: 500px;\"\r\n                        >\r\n                          <span>${urlify(msgContent.content)}</span>\r\n                        </div>`\r\n                      : `<div class=\"message\">\r\n                          <span>${urlify(msgContent.content)}</span>\r\n                        </div>`\r\n                  }\r\n              </div>\r\n        `;\r\n      if (msgContent.senderId && msgContent.senderId == userData.id) {\r\n        div.addEventListener(\"contextmenu\", openContext);\r\n      }\r\n      chatMessages.appendChild(div);\r\n    }\r\n  }\r\n\r\n  clearInterval(currentInterval);\r\n  currentInterval = setInterval(refreshChat, 15000);\r\n}\r\n\r\nfunction urlify(text) {\r\n  if (text.includes(\"blob:\")) {\r\n    return `<img src=\"${text}\"></img>`;\r\n  }\r\n  var urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  return text.replace(urlRegex, function (url) {\r\n    return '<img src=\"' + url + '\">' + url + \"</img>\";\r\n  });\r\n}\r\n\r\nasync function sendMessage(msg) {\r\n  let chatPage = document.querySelector(\".chat-page\");\r\n  let chatId = chatPage.getAttribute(\"data-id\");\r\n\r\n  if (chatId != null && msg != \"\") {\r\n    let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n    let msgData = {\r\n      senderId: userData.id,\r\n      senderImage: userData.img,\r\n      senderName: userData.username,\r\n      sendDate: new Date(),\r\n      content: msg,\r\n    };\r\n    await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.post)(`/chatApp/chats/${chatId}/messages`, msgData);\r\n    loadChat();\r\n  }\r\n}\r\n\r\nasync function deleteChat(e) {\r\n  let chatId = e.target.parentElement.getAttribute(\"data-id\");\r\n  await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.del)(`/chatApp/chats/${chatId}`);\r\n  refreshChats();\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"Chat deleted.\", \"green\");\r\n}\r\n\r\nasync function leaveChat(e) {\r\n  let chatId = e.target.parentElement.getAttribute(\"data-id\");\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  userData.chats.splice(userData.chats.indexOf(chatId), 1);\r\n  await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.put)(`/chatApp/users/${userData.id}`, {\r\n    email: userData.email,\r\n    password: userData.password,\r\n    id: userData.id,\r\n    chats: userData.chats,\r\n    img: userData.img,\r\n    username: userData.username,\r\n  });\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.reloadUserData)();\r\n  refreshChats();\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.showNotification)(\"Successfully left chat - \" + chatId);\r\n}\r\n\r\nfunction openContext(event) {\r\n  event.preventDefault();\r\n  document.querySelector(\".message-menu\").style.display = \"flex\";\r\n  document.querySelector(\".message-menu\").style.top = mouseY(event) + \"px\";\r\n  document.querySelector(\".message-menu\").style.left = mouseX(event) + \"px\";\r\n  contextElement = document.elementFromPoint(event.clientX, event.clientY);\r\n  window.event.returnValue = false;\r\n}\r\n\r\nfunction mouseX(evt) {\r\n  if (evt.pageX) {\r\n    return evt.pageX;\r\n  } else if (evt.clientX) {\r\n    return (\r\n      evt.clientX +\r\n      (document.documentElement.scrollLeft\r\n        ? document.documentElement.scrollLeft\r\n        : document.body.scrollLeft)\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction mouseY(evt) {\r\n  if (evt.pageY) {\r\n    return evt.pageY - 45;\r\n  } else if (evt.clientY) {\r\n    return (\r\n      evt.clientY +\r\n      (document.documentElement.scrollTop\r\n        ? document.documentElement.scrollTop\r\n        : document.body.scrollTop)\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction refreshChats() {\r\n  _lib_js__WEBPACK_IMPORTED_MODULE_2__.page.redirect(\"/mychats\");\r\n}\r\n\r\nasync function editMessage() {\r\n  isEditing = true;\r\n  let msgId =\r\n    contextElement.getAttribute(\"data-id\") ||\r\n    contextElement.parentElement.getAttribute(\"data-id\") ||\r\n    contextElement.parentElement.parentElement.getAttribute(\"data-id\") ||\r\n    contextElement.parentElement.parentElement.parentElement.getAttribute(\r\n      \"data-id\"\r\n    );\r\n  let chatId = document.querySelector(\".chat-page\").getAttribute(\"data-id\");\r\n  let input = document\r\n    .querySelector(\".chat-page\")\r\n    .querySelector(\"#message-input\");\r\n\r\n  let message = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(`/chatApp/chats/${chatId}/messages/${msgId}`);\r\n  input.value = message.content;\r\n  editingMessageId = msgId;\r\n}\r\n\r\nasync function editMessageSend(event) {\r\n  let msgId = editingMessageId;\r\n  let chatId = document.querySelector(\".chat-page\").getAttribute(\"data-id\");\r\n  let newMsg = event;\r\n  let message = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(`/chatApp/chats/${chatId}/messages/${msgId}`);\r\n  let input = document\r\n    .querySelector(\".chat-page\")\r\n    .querySelector(\"#message-input\");\r\n  message.content = newMsg;\r\n  input.value = \"\";\r\n\r\n  await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.put)(`/chatApp/chats/${chatId}/messages/${msgId}`, message);\r\n  loadChat();\r\n  isEditing = false;\r\n}\r\n\r\nasync function deleteMessage() {\r\n  if (confirm(\"Are you sure you want to delete this message?\")) {\r\n    let msgId =\r\n      contextElement.getAttribute(\"data-id\") ||\r\n      contextElement.parentElement.getAttribute(\"data-id\") ||\r\n      contextElement.parentElement.parentElement.getAttribute(\"data-id\") ||\r\n      contextElement.parentElement.parentElement.parentElement.getAttribute(\r\n        \"data-id\"\r\n      );\r\n    let chatId = document.querySelector(\".chat-page\").getAttribute(\"data-id\");\r\n    await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.del)(`/chatApp/chats/${chatId}/messages/${msgId}`);\r\n    loadChat();\r\n  }\r\n}\r\n\r\nfunction sleep(ms) {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n\r\nasync function refreshChat() {\r\n  let chatPage = document.querySelector(\".chat-page\") || null;\r\n  if (chatPage != null && chatPage.getAttribute(\"data-id\") != null) {\r\n    let refreshSeconds = document.querySelector(\"#refresh-seconds\");\r\n    for (let sec = 15; sec > 0; sec--) {\r\n      await sleep(1000);\r\n      sec < 10\r\n        ? (refreshSeconds.textContent = \"0\" + sec)\r\n        : (refreshSeconds.textContent = sec);\r\n    }\r\n    loadChat();\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/myChats.js?");

/***/ }),

/***/ "./src/nav.js":
/*!********************!*\
  !*** ./src/nav.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showNav\": () => (/* binding */ showNav)\n/* harmony export */ });\n/* harmony import */ var _data_user_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/user.js */ \"./src/data/user.js\");\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\nlet navHeader = document.querySelector(\".page-header\");\r\nlet userMenu = document.querySelector(\".user-menu\");\r\n\r\nlet navTemplate = (user) => _lib_js__WEBPACK_IMPORTED_MODULE_1__.html` <a\r\n    class=\"header-option header-left\"\r\n    href=\"https://www.instagram.com/kristiqnpetsanov/\"\r\n    ><i class=\"fa-brands fa-instagram\"></i\r\n  ></a>\r\n  <a\r\n    class=\"header-option header-left-2\"\r\n    href=\"https://www.linkedin.com/in/kristiyan-petsanov-82ba23252/\"\r\n    ><i class=\"fa-brands fa-linkedin\"></i\r\n  ></a>\r\n  <a class=\"header-option\" href=\"/\">Home</a>\r\n  ${user ? _lib_js__WEBPACK_IMPORTED_MODULE_1__.html`<a class=\"header-option\" href=\"/mychats\">My Chats</a>` : null}\r\n\r\n  <a class=\"header-option\" href=\"/about\">About</a>\r\n\r\n  <div\r\n    @click=${_utils_js__WEBPACK_IMPORTED_MODULE_2__.toggleUserMenu}\r\n    class=\"header-option header-right\"\r\n    id=\"user-menu\"\r\n  >\r\n    ${user && user.img\r\n      ? _lib_js__WEBPACK_IMPORTED_MODULE_1__.html`<img class=\"header-image\" src=\"${user.img}\" />`\r\n      : _lib_js__WEBPACK_IMPORTED_MODULE_1__.html`<i class=\"fa-solid fa-user\"></i>`}\r\n  </div>`;\r\n\r\nlet userMenuTemplate = (user, onLogout) => _lib_js__WEBPACK_IMPORTED_MODULE_1__.html`\r\n  <div class=\"profile-name\" id=\"profile-name\">\r\n    Welcome, ${(user && user.username) || \"Guest\"}!\r\n  </div>\r\n  ${user\r\n    ? _lib_js__WEBPACK_IMPORTED_MODULE_1__.html`<a class=\"user-menu-option\" href=\"/settings\">\r\n          <span>Settings</span> <i class=\"fa-solid fa-gear\"></i>\r\n        </a>\r\n        <a\r\n          class=\"user-menu-option\"\r\n          id=\"logout\"\r\n          href=\"javascript:void(0)\"\r\n          @click=${onLogout}\r\n        >\r\n          <span>Logout</span> <i class=\"fa-solid fa-right-from-bracket\"></i>\r\n        </a>`\r\n    : _lib_js__WEBPACK_IMPORTED_MODULE_1__.html`<a class=\"user-menu-option\" href=\"/login\">\r\n          <span>Sign In</span> <i class=\"fa-solid fa-right-to-bracket\"></i>\r\n        </a>\r\n        <a class=\"user-menu-option\" href=\"/register\">\r\n          <span>Register</span> <i class=\"fa-solid fa-user-plus\"></i>\r\n        </a>`}\r\n`;\r\n\r\nfunction showNav() {\r\n  let user = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.getUserData)();\r\n  (0,_lib_js__WEBPACK_IMPORTED_MODULE_1__.render)(navTemplate(user), navHeader);\r\n  (0,_lib_js__WEBPACK_IMPORTED_MODULE_1__.render)(userMenuTemplate(user, onLogout), userMenu);\r\n}\r\n\r\nfunction onLogout() {\r\n  (0,_data_user_js__WEBPACK_IMPORTED_MODULE_0__.logoutUser)();\r\n  showNav();\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/nav.js?");

/***/ }),

/***/ "./src/register.js":
/*!*************************!*\
  !*** ./src/register.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showRegisterPage\": () => (/* binding */ showRegisterPage)\n/* harmony export */ });\n/* harmony import */ var _data_user_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/user.js */ \"./src/data/user.js\");\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\n\r\nlet registerTemplate = (onRegister) => _lib_js__WEBPACK_IMPORTED_MODULE_1__.html` <sector class=\"register-page\">\r\n  <form @submit=${onRegister} id=\"register-form\">\r\n    <h1>Register</h1>\r\n    <span>Having a profile is required to use the chat.</span>\r\n    <div class=\"single-input\">\r\n      <span><i class=\"fas fa-user\"></i></span>\r\n      <input type=\"email\" name=\"email\" placeholder=\"Email\" />\r\n    </div>\r\n    <div class=\"single-input\">\r\n      <span><i class=\"fas fa-user\"></i></span>\r\n      <input type=\"text\" name=\"username\" placeholder=\"Username\" />\r\n    </div>\r\n    <div class=\"single-input\">\r\n      <span><i class=\"fas fa-unlock\"></i></span>\r\n      <input type=\"password\" name=\"password\" placeholder=\"Password\" />\r\n    </div>\r\n    <div class=\"single-input\">\r\n      <span><i class=\"fas fa-unlock\"></i></span>\r\n      <input\r\n        type=\"password\"\r\n        name=\"repeatPassword\"\r\n        placeholder=\"Repeat Password\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"single-input submit-btn\">\r\n      <input type=\"submit\" value=\"Register\" />\r\n    </div>\r\n    <span\r\n      >Already have an account?\r\n      <a href=\"/login\" id=\"sign-in-text\">Sign In</a></span\r\n    >\r\n  </form>\r\n</sector>`;\r\n\r\nfunction showRegisterPage(ctx) {\r\n  ctx.render(registerTemplate((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.createSubmitHandler)(onRegister)));\r\n\r\n  async function onRegister({ email, username, password, repeatPassword }) {\r\n    if (email == \"\" || password == \"\" || username == \"\")\r\n      return (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"All fields are required.\", \"red\");\r\n    if (password != repeatPassword)\r\n      return (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"Passwords do not match.\", \"red\");\r\n    let regged = await (0,_data_user_js__WEBPACK_IMPORTED_MODULE_0__.registerUser)(email, password, username);\r\n    if (regged) {\r\n      ctx.page.redirect(\"/\");\r\n      ctx.updateNav();\r\n    }\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/register.js?");

/***/ }),

/***/ "./src/settings.js":
/*!*************************!*\
  !*** ./src/settings.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"selectOption\": () => (/* binding */ selectOption),\n/* harmony export */   \"showPage\": () => (/* binding */ showPage),\n/* harmony export */   \"showSettingsPage\": () => (/* binding */ showSettingsPage)\n/* harmony export */ });\n/* harmony import */ var _lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib.js */ \"./src/lib.js\");\n/* harmony import */ var _update_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./update.js */ \"./src/update.js\");\n\r\n\r\n\r\nlet settingsTemplate = () => _lib_js__WEBPACK_IMPORTED_MODULE_0__.html`<sector class=\"settings-page\">\r\n  <div class=\"settings-nav\">\r\n    <div class=\"s-nav-title\">Account <br />Management</div>\r\n    <div class=\"s-nav-menu\">\r\n      <a class=\"menu-option\" href=\"/settings/username\">\r\n        <i class=\"fa-solid fa-signature\"></i> <span>username</span>\r\n      </a>\r\n      <a class=\"menu-option\" href=\"/settings/pinformation\">\r\n        <i class=\"fa-solid fa-user\"></i>\r\n        <span>personal information</span>\r\n      </a>\r\n      <a class=\"menu-option\" href=\"/settings/account\">\r\n        <i class=\"fa-solid fa-key\"></i>\r\n        <span>account sign-in</span>\r\n      </a>\r\n      <a class=\"menu-option\" href=\"/settings/actions\">\r\n        <i class=\"fa-solid fa-circle-exclamation\"></i>\r\n        <span>account actions</span>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class=\"settings-blocks\">\r\n    <div class=\"settings-option\" id=\"username-option-page\">\r\n      <div class=\"option-left\">\r\n        <div class=\"left-title\">Username</div>\r\n        <div class=\"left-desc\">\r\n          Your username is used by other users to identify you.\r\n        </div>\r\n      </div>\r\n      <div class=\"option-right\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          id=\"settings-username\"\r\n          class=\"settings-username\"\r\n          placeholder=\"Username\"\r\n          autocomplete=\"off\"\r\n        />\r\n        <label for=\"username\" class=\"username-label\">Username</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"avatar\"\r\n          id=\"settings-avatar\"\r\n          class=\"settings-username4\"\r\n          placeholder=\"Avatar\"\r\n          autocomplete=\"off\"\r\n        />\r\n        <label for=\"avatar\" class=\"username-4-label\">Avatar</label>\r\n      </div>\r\n      <button @click=${_update_js__WEBPACK_IMPORTED_MODULE_1__.saveUsername} class=\"save-changes\" id=\"save-username\">\r\n        save changes\r\n      </button>\r\n    </div>\r\n    <div class=\"settings-option\" id=\"pinformation-option-page\">\r\n      <div class=\"option-left\">\r\n        <div class=\"left-title\">Personal Information</div>\r\n        <div class=\"left-desc\">\r\n          This information is private and will not be shared with other users.\r\n        </div>\r\n      </div>\r\n      <div class=\"option-right\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"email\"\r\n          id=\"settings-email\"\r\n          class=\"settings-username\"\r\n          placeholder=\"Email\"\r\n          autocomplete=\"off\"\r\n        />\r\n        <label for=\"email\" class=\"username-label\">Email</label>\r\n      </div>\r\n      <button @click=${_update_js__WEBPACK_IMPORTED_MODULE_1__.saveEmail} class=\"save-changes\" id=\"save-email\">\r\n        save changes\r\n      </button>\r\n    </div>\r\n    <div class=\"settings-option\" style=\"height: 40%\" id=\"account-option-page\">\r\n      <div class=\"option-left\">\r\n        <div class=\"left-title\">Account Sign-In</div>\r\n        <div class=\"left-desc\">\r\n          We recommend that you periodically update your password to help\r\n          prevent unauthorized access to your account.\r\n        </div>\r\n      </div>\r\n      <div class=\"option-right\">\r\n        <h2 align=\"center\">Change Password</h2>\r\n        <input\r\n          type=\"password\"\r\n          name=\"current-password\"\r\n          id=\"settings-current-password\"\r\n          class=\"settings-username\"\r\n          placeholder=\"Current Password\"\r\n          autocomplete=\"off\"\r\n        />\r\n        <label for=\"current-password\" class=\"username-label\"\r\n          >Current Password</label\r\n        >\r\n        <input\r\n          type=\"password\"\r\n          name=\"new-password\"\r\n          id=\"settings-new-password\"\r\n          class=\"settings-username2\"\r\n          placeholder=\"New Password\"\r\n          autocomplete=\"off\"\r\n        />\r\n        <label for=\"new-password\" class=\"username-2-label\">New Password</label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"repeat-new-password\"\r\n          id=\"settings-repeat-new-password\"\r\n          class=\"settings-username3\"\r\n          placeholder=\"Repeat New Password\"\r\n          autocomplete=\"off\"\r\n        />\r\n        <label for=\"repeat-new-password\" class=\"username-3-label\"\r\n          >Repeat New Password</label\r\n        >\r\n      </div>\r\n      <button @click=${_update_js__WEBPACK_IMPORTED_MODULE_1__.savePassword} class=\"save-changes\" id=\"save-password\">\r\n        save changes\r\n      </button>\r\n    </div>\r\n    <div class=\"settings-option\" id=\"account-actions-page\">\r\n      <div class=\"option-left\">\r\n        <div class=\"left-title\">Account Actions</div>\r\n        <div class=\"left-desc\">All available account actions.</div>\r\n      </div>\r\n      <div class=\"option-right\">\r\n        <span\r\n          >Once you delete your account, it cannot be undone. Your account will\r\n          be gone forever. You can make a new account with same email address\r\n          once the old one is deleted.</span\r\n        >\r\n        <button\r\n          @click=${_update_js__WEBPACK_IMPORTED_MODULE_1__.deleteAccount}\r\n          class=\"delete-account\"\r\n          id=\"delete-account\"\r\n        >\r\n          Delete Account\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</sector>`;\r\n\r\nfunction showSettingsPage(ctx) {\r\n  ctx.render(settingsTemplate());\r\n  ctx.page.redirect(\"/settings/username\");\r\n  loadUserData();\r\n}\r\n\r\nfunction selectOption(e) {\r\n  let elem = document.querySelector(`a[href=\"${e.path}\"]`);\r\n  let menuOptions = Array.from(document.querySelectorAll(\".menu-option\"));\r\n  menuOptions.forEach((o) => o.classList.remove(\"settings-selected\"));\r\n  elem.classList.add(\"settings-selected\");\r\n}\r\n\r\nfunction showPage(id) {\r\n  let settingsOptions = Array.from(\r\n    document.querySelectorAll(\".settings-option\")\r\n  );\r\n  settingsOptions.forEach((o) => (o.style.display = \"none\"));\r\n  document.getElementById(id).style.display = \"flex\";\r\n}\r\n\r\nasync function loadUserData() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  document.getElementById(\"settings-username\").value = userData.username;\r\n  document.getElementById(\"settings-email\").value = userData.email;\r\n  document.getElementById(\"settings-avatar\").value =\r\n    userData.img || \"No Avatar\";\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/settings.js?");

/***/ }),

/***/ "./src/update.js":
/*!***********************!*\
  !*** ./src/update.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"deleteAccount\": () => (/* binding */ deleteAccount),\n/* harmony export */   \"saveEmail\": () => (/* binding */ saveEmail),\n/* harmony export */   \"savePassword\": () => (/* binding */ savePassword),\n/* harmony export */   \"saveUsername\": () => (/* binding */ saveUsername)\n/* harmony export */ });\n/* harmony import */ var _data_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/api.js */ \"./src/data/api.js\");\n/* harmony import */ var _data_user_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data/user.js */ \"./src/data/user.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\n\r\nasync function saveUsername() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  let newUsername = document.getElementById(\"settings-username\").value;\r\n  let newAvatar = document.getElementById(\"settings-avatar\").value;\r\n  let data = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.put)(`/chatApp/users/${userData.id}`, {\r\n    username: newUsername,\r\n    img: newAvatar,\r\n    email: userData.email,\r\n    password: userData.password,\r\n    chats: userData.chats,\r\n    id: userData.id,\r\n  });\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"Updated username and avatar!\", \"green\");\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.reloadUserData)();\r\n}\r\n\r\nasync function saveEmail() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  let newEmail = document.getElementById(\"settings-email\").value;\r\n  let data = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.put)(`/chatApp/users/${userData.id}`, {\r\n    username: userData.username,\r\n    img: userData.img,\r\n    email: newEmail,\r\n    password: userData.password,\r\n    chats: userData.chats,\r\n    id: userData.id,\r\n  });\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\r\n    \"Updated email successfully! You have been logged out.\",\r\n    \"green\"\r\n  );\r\n  (0,_data_user_js__WEBPACK_IMPORTED_MODULE_1__.logoutUser)();\r\n}\r\n\r\nasync function savePassword() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  let currentPassword = document.getElementById(\r\n    \"settings-current-password\"\r\n  ).value;\r\n  let newPassword = document.getElementById(\"settings-new-password\").value;\r\n  let reNewPassword = document.getElementById(\r\n    \"settings-repeat-new-password\"\r\n  ).value;\r\n\r\n  if (currentPassword == \"\" || newPassword == \"\" || reNewPassword == \"\") {\r\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"All fields are required!\", \"red\");\r\n  }\r\n  if (currentPassword != userData.password) {\r\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"Invalid current password!\", \"red\");\r\n  }\r\n  if (newPassword != reNewPassword) {\r\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"New passwords do not match!\", \"red\");\r\n  }\r\n  let data = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.put)(`/chatApp/users/${userData.id}`, {\r\n    username: userData.username,\r\n    img: userData.img,\r\n    email: userData.email,\r\n    password: newPassword,\r\n    chats: userData.chats,\r\n    id: userData.id,\r\n  });\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\r\n    \"Updated password successfully! You have been logged out.\",\r\n    \"green\"\r\n  );\r\n  (0,_data_user_js__WEBPACK_IMPORTED_MODULE_1__.logoutUser)();\r\n}\r\n\r\nasync function deleteAccount() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  let data = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.del)(`/chatApp/users/${userData.id}`);\r\n  (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.showNotification)(\"Deleted account successfully!\", \"green\");\r\n  (0,_data_user_js__WEBPACK_IMPORTED_MODULE_1__.logoutUser)();\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/update.js?");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clearUserData\": () => (/* binding */ clearUserData),\n/* harmony export */   \"createSubmitHandler\": () => (/* binding */ createSubmitHandler),\n/* harmony export */   \"getUserData\": () => (/* binding */ getUserData),\n/* harmony export */   \"hideSections\": () => (/* binding */ hideSections),\n/* harmony export */   \"reloadUserData\": () => (/* binding */ reloadUserData),\n/* harmony export */   \"setUserData\": () => (/* binding */ setUserData),\n/* harmony export */   \"showNotification\": () => (/* binding */ showNotification),\n/* harmony export */   \"toggleLoading\": () => (/* binding */ toggleLoading),\n/* harmony export */   \"toggleUserMenu\": () => (/* binding */ toggleUserMenu)\n/* harmony export */ });\n/* harmony import */ var _data_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/api.js */ \"./src/data/api.js\");\n\r\n\r\nlet menuOpen = false;\r\nfunction toggleUserMenu() {\r\n  let menu = document.querySelector(\".user-menu\");\r\n  if (!menuOpen) {\r\n    menu.style.display = \"flex\";\r\n    menuOpen = true;\r\n  } else {\r\n    menu.style.display = \"none\";\r\n    menuOpen = false;\r\n  }\r\n}\r\n\r\nfunction hideSections() {\r\n  document\r\n    .querySelectorAll(\"sector\")\r\n    .forEach((s) => (s.style.display = \"none\"));\r\n}\r\n\r\nfunction showNotification(text, color) {\r\n  let notifElem = document.getElementById(\"notification\");\r\n  notifElem.innerHTML = text;\r\n  notifElem.style.backgroundColor = color;\r\n  notifElem.style.display = \"flex\";\r\n  notifElem.style.opacity = \"1\";\r\n  setTimeout(() => {\r\n    notifElem.style.opacity = \"0\";\r\n    notifElem.style.display = \"none\";\r\n  }, 3000);\r\n}\r\n\r\nfunction toggleLoading(show, text) {\r\n  let loader = document.querySelector(\".loading-page\");\r\n  if (text) {\r\n    loader.getElementsByTagName(\"span\")[0].textContent = text;\r\n  }\r\n  if (show) {\r\n    loader.style.display = \"flex\";\r\n  } else {\r\n    loader.style.display = \"none\";\r\n  }\r\n}\r\n\r\nasync function reloadUserData() {\r\n  let userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n  let user = await (0,_data_api_js__WEBPACK_IMPORTED_MODULE_0__.get)(`/chatApp/users/${userData.id}`);\r\n  localStorage.setItem(\r\n    \"userData\",\r\n    JSON.stringify({\r\n      email: user.email,\r\n      username: user.username,\r\n      password: user.password,\r\n      img: user.img,\r\n      chats: user.chats,\r\n      id: userData.id,\r\n    })\r\n  );\r\n}\r\n\r\nfunction createSubmitHandler(callback) {\r\n  return function (event) {\r\n    event.preventDefault();\r\n    let formData = new FormData(event.target);\r\n    let data = Object.fromEntries(formData.entries());\r\n\r\n    callback(data);\r\n  };\r\n}\r\n\r\nfunction getUserData() {\r\n  return JSON.parse(localStorage.getItem(\"userData\"));\r\n}\r\n\r\nfunction setUserData(userData) {\r\n  localStorage.setItem(\"userData\", JSON.stringify(userData));\r\n}\r\n\r\nfunction clearUserData() {\r\n  localStorage.removeItem(\"userData\");\r\n}\r\n\n\n//# sourceURL=webpack://chatapp/./src/utils.js?");

/***/ }),

/***/ "./node_modules/lit-html/lit-html.js":
/*!*******************************************!*\
  !*** ./node_modules/lit-html/lit-html.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"_$LH\": () => (/* binding */ Z),\n/* harmony export */   \"html\": () => (/* binding */ x),\n/* harmony export */   \"noChange\": () => (/* binding */ T),\n/* harmony export */   \"nothing\": () => (/* binding */ A),\n/* harmony export */   \"render\": () => (/* binding */ B),\n/* harmony export */   \"svg\": () => (/* binding */ b)\n/* harmony export */ });\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n * SPDX-License-Identifier: BSD-3-Clause\r\n */\r\nvar t;const i=window,s=i.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,o=\"$lit$\",n=`lit$${(Math.random()+\"\").slice(9)}$`,l=\"?\"+n,h=`<${l}>`,r=document,d=()=>r.createComment(\"\"),u=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,c=Array.isArray,v=t=>c(t)||\"function\"==typeof(null==t?void 0:t[Symbol.iterator]),a=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${a}(?:([^\\\\s\"'>=/]+)(${a}*=${a}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,w=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=w(1),b=w(2),T=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),E=new WeakMap,C=r.createTreeWalker(r,129,null,!1),P=(t,i)=>{const s=t.length-1,l=[];let r,d=2===i?\"<svg>\":\"\",u=f;for(let i=0;i<s;i++){const s=t[i];let e,c,v=-1,a=0;for(;a<s.length&&(u.lastIndex=a,c=u.exec(s),null!==c);)a=u.lastIndex,u===f?\"!--\"===c[1]?u=_:void 0!==c[1]?u=m:void 0!==c[2]?(y.test(c[2])&&(r=RegExp(\"</\"+c[2],\"g\")),u=p):void 0!==c[3]&&(u=p):u===p?\">\"===c[0]?(u=null!=r?r:f,v=-1):void 0===c[1]?v=-2:(v=u.lastIndex-c[2].length,e=c[1],u=void 0===c[3]?p:'\"'===c[3]?$:g):u===$||u===g?u=p:u===_||u===m?u=f:(u=p,r=void 0);const w=u===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";d+=u===f?s+h:v>=0?(l.push(e),s.slice(0,v)+o+s.slice(v)+n+w):s+n+(-2===v?(l.push(void 0),i):w)}const c=d+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==e?e.createHTML(c):c,l]};class V{constructor({strings:t,_$litType$:i},e){let h;this.parts=[];let r=0,u=0;const c=t.length-1,v=this.parts,[a,f]=P(t,i);if(this.el=V.createElement(a,e),C.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(h=C.nextNode())&&v.length<c;){if(1===h.nodeType){if(h.hasAttributes()){const t=[];for(const i of h.getAttributeNames())if(i.endsWith(o)||i.startsWith(n)){const s=f[u++];if(t.push(i),void 0!==s){const t=h.getAttribute(s.toLowerCase()+o).split(n),i=/([.?@])?(.*)/.exec(s);v.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?k:\"?\"===i[1]?I:\"@\"===i[1]?L:R})}else v.push({type:6,index:r})}for(const i of t)h.removeAttribute(i)}if(y.test(h.tagName)){const t=h.textContent.split(n),i=t.length-1;if(i>0){h.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)h.append(t[s],d()),C.nextNode(),v.push({type:2,index:++r});h.append(t[i],d())}}}else if(8===h.nodeType)if(h.data===l)v.push({type:2,index:r});else{let t=-1;for(;-1!==(t=h.data.indexOf(n,t+1));)v.push({type:7,index:r}),t+=n.length-1}r++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function N(t,i,s=t,e){var o,n,l,h;if(i===T)return i;let r=void 0!==e?null===(o=s._$Co)||void 0===o?void 0:o[e]:s._$Cl;const d=u(i)?void 0:i._$litDirective$;return(null==r?void 0:r.constructor)!==d&&(null===(n=null==r?void 0:r._$AO)||void 0===n||n.call(r,!1),void 0===d?r=void 0:(r=new d(t),r._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Co)&&void 0!==l?l:h._$Co=[])[e]=r:s._$Cl=r),void 0!==r&&(i=N(t,r._$AS(t,i.values),r,e)),i}class S{constructor(t,i){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:r).importNode(s,!0);C.currentNode=o;let n=C.nextNode(),l=0,h=0,d=e[0];for(;void 0!==d;){if(l===d.index){let i;2===d.type?i=new M(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new z(n,this,t)),this.u.push(i),d=e[++h]}l!==(null==d?void 0:d.index)&&(n=C.nextNode(),l++)}return o}p(t){let i=0;for(const s of this.u)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class M{constructor(t,i,s,e){var o;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cm=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===(null==t?void 0:t.nodeType)&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=N(this,t,i),u(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==T&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):v(t)?this.k(t):this.g(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}g(t){this._$AH!==A&&u(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=V.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.p(s);else{const t=new S(o,this),i=t.v(this.options);t.p(s),this.T(i),this._$AH=t}}_$AC(t){let i=E.get(t.strings);return void 0===i&&E.set(t.strings,i=new V(t)),i}k(t){c(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new M(this.S(d()),this.S(d()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cm=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class R{constructor(t,i,s,e,o){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=N(this,t,i,0),n=!u(t)||t!==this._$AH&&t!==T,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=N(this,e[s+l],i,l),h===T&&(h=this._$AH[l]),n||(n=!u(h)||h!==this._$AH[l]),h===A?t=A:t!==A&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class k extends R{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}const H=s?s.emptyScript:\"\";class I extends R{constructor(){super(...arguments),this.type=4}j(t){t&&t!==A?this.element.setAttribute(this.name,H):this.element.removeAttribute(this.name)}}class L extends R{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=N(this,t,i,0))&&void 0!==s?s:A)===T)return;const e=this._$AH,o=t===A&&e!==A||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==A&&(e===A||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){N(this,t)}}const Z={P:o,A:n,M:l,C:1,L:P,D:S,R:v,V:N,I:M,H:R,N:I,U:L,F:k,B:z},j=i.litHtmlPolyfillSupport;null==j||j(V,M),(null!==(t=i.litHtmlVersions)&&void 0!==t?t:i.litHtmlVersions=[]).push(\"2.7.0\");const B=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new M(i.insertBefore(d(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l};\r\n//# sourceMappingURL=lit-html.js.map\r\n\n\n//# sourceURL=webpack://chatapp/./node_modules/lit-html/lit-html.js?");

/***/ }),

/***/ "./node_modules/page/page.mjs":
/*!************************************!*\
  !*** ./node_modules/page/page.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var suffix = res[6];\n    var asterisk = res[7];\n\n    var repeat = suffix === '+' || suffix === '*';\n    var optional = suffix === '?' || suffix === '*';\n    var delimiter = prefix || '/';\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?');\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$');\n    }\n  }\n\n  return function (obj) {\n    var path = '';\n    var data = obj || {};\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path);\n  var re = tokensToRegExp(tokens, options);\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i]);\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n  var lastToken = tokens[tokens.length - 1];\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken);\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = token.pattern;\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || [];\n\n  if (!isarray(keys)) {\n    options = keys;\n    keys = [];\n  } else if (!options) {\n    options = {};\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/**\n   * Module dependencies.\n   */\n\n  \n\n  /**\n   * Short-cuts for global-object checks\n   */\n\n  var hasDocument = ('undefined' !== typeof document);\n  var hasWindow = ('undefined' !== typeof window);\n  var hasHistory = ('undefined' !== typeof history);\n  var hasProcess = typeof process !== 'undefined';\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = hasDocument && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var isLocation = hasWindow && !!(window.history.location || window.location);\n\n  /**\n   * The page instance\n   * @api private\n   */\n  function Page() {\n    // public things\n    this.callbacks = [];\n    this.exits = [];\n    this.current = '';\n    this.len = 0;\n\n    // private things\n    this._decodeURLComponents = true;\n    this._base = '';\n    this._strict = false;\n    this._running = false;\n    this._hashbang = false;\n\n    // bound functions\n    this.clickHandler = this.clickHandler.bind(this);\n    this._onpopstate = this._onpopstate.bind(this);\n  }\n\n  /**\n   * Configure the instance of page. This can be called multiple times.\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.configure = function(options) {\n    var opts = options || {};\n\n    this._window = opts.window || (hasWindow && window);\n    this._decodeURLComponents = opts.decodeURLComponents !== false;\n    this._popstate = opts.popstate !== false && hasWindow;\n    this._click = opts.click !== false && hasDocument;\n    this._hashbang = !!opts.hashbang;\n\n    var _window = this._window;\n    if(this._popstate) {\n      _window.addEventListener('popstate', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('popstate', this._onpopstate, false);\n    }\n\n    if (this._click) {\n      _window.document.addEventListener(clickEvent, this.clickHandler, false);\n    } else if(hasDocument) {\n      _window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    }\n\n    if(this._hashbang && hasWindow && !hasHistory) {\n      _window.addEventListener('hashchange', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('hashchange', this._onpopstate, false);\n    }\n  };\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  Page.prototype.base = function(path) {\n    if (0 === arguments.length) return this._base;\n    this._base = path;\n  };\n\n  /**\n   * Gets the `base`, which depends on whether we are using History or\n   * hashbang routing.\n\n   * @api private\n   */\n  Page.prototype._getBase = function() {\n    var base = this._base;\n    if(!!base) return base;\n    var loc = hasWindow && this._window && this._window.location;\n\n    if(hasWindow && this._hashbang && loc && loc.protocol === 'file:') {\n      base = loc.pathname;\n    }\n\n    return base;\n  };\n\n  /**\n   * Get or set strict path matching to `enable`\n   *\n   * @param {boolean} enable\n   * @api public\n   */\n\n  Page.prototype.strict = function(enable) {\n    if (0 === arguments.length) return this._strict;\n    this._strict = enable;\n  };\n\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.start = function(options) {\n    var opts = options || {};\n    this.configure(opts);\n\n    if (false === opts.dispatch) return;\n    this._running = true;\n\n    var url;\n    if(isLocation) {\n      var window = this._window;\n      var loc = window.location;\n\n      if(this._hashbang && ~loc.hash.indexOf('#!')) {\n        url = loc.hash.substr(2) + loc.search;\n      } else if (this._hashbang) {\n        url = loc.search + loc.hash;\n      } else {\n        url = loc.pathname + loc.search + loc.hash;\n      }\n    }\n\n    this.replace(url, null, true, opts.dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  Page.prototype.stop = function() {\n    if (!this._running) return;\n    this.current = '';\n    this.len = 0;\n    this._running = false;\n\n    var window = this._window;\n    this._click && window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    hasWindow && window.removeEventListener('popstate', this._onpopstate, false);\n    hasWindow && window.removeEventListener('hashchange', this._onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  Page.prototype.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  Page.prototype.back = function(path, state) {\n    var page = this;\n    if (this.len > 0) {\n      var window = this._window;\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      hasHistory && window.history.back();\n      this.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    } else {\n      setTimeout(function() {\n        page.show(page._getBase(), state);\n      });\n    }\n  };\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  Page.prototype.redirect = function(from, to) {\n    var inst = this;\n\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page.call(this, from, function(e) {\n        setTimeout(function() {\n          inst.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        inst.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  Page.prototype.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n\n  Page.prototype.dispatch = function(ctx, prev) {\n    var i = 0, j = 0, page = this;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled.call(page, ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  Page.prototype.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return this.exit('*', path);\n    }\n\n    var route = new Route(path, null, this);\n    for (var i = 1; i < arguments.length; ++i) {\n      this.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Handle \"click\" events.\n   */\n\n  /* jshint +W054 */\n  Page.prototype.clickHandler = function(e) {\n    if (1 !== this._which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n    // ensure link\n    // use shadow dom when available if not, fall back to composedPath()\n    // for browsers that only have shady\n    var el = e.target;\n    var eventPath = e.path || (e.composedPath ? e.composedPath() : null);\n\n    if(eventPath) {\n      for (var i = 0; i < eventPath.length; i++) {\n        if (!eventPath[i].nodeName) continue;\n        if (eventPath[i].nodeName.toUpperCase() !== 'A') continue;\n        if (!eventPath[i].href) continue;\n\n        el = eventPath[i];\n        break;\n      }\n    }\n\n    // continue ensure link\n    // el.nodeName for svg links are 'a' instead of 'A'\n    while (el && 'A' !== el.nodeName.toUpperCase()) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName.toUpperCase()) return;\n\n    // check if link is inside an svg\n    // in this case, both href and target are always inside an object\n    var svg = (typeof el.href === 'object') && el.href.constructor.name === 'SVGAnimatedString';\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if(!this._hashbang && this._samePath(el) && (el.hash || '#' === link)) return;\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    // svg target is an object and its desired value is in .baseVal property\n    if (svg ? el.target.baseVal : el.target) return;\n\n    // x-origin\n    // note: svg links that are not relative don't call click events (and skip page.js)\n    // consequently, all svg links tested inside page.js are relative and in the same origin\n    if (!svg && !this.sameOrigin(el.href)) return;\n\n    // rebuild path\n    // There aren't .pathname and .search properties in svg links, so we use href\n    // Also, svg href is an object and its desired value is in .baseVal property\n    var path = svg ? el.href.baseVal : (el.pathname + el.search + (el.hash || ''));\n\n    path = path[0] !== '/' ? '/' + path : path;\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (hasProcess && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n    var pageBase = this._getBase();\n\n    if (path.indexOf(pageBase) === 0) {\n      path = path.substr(pageBase.length);\n    }\n\n    if (this._hashbang) path = path.replace('#!', '');\n\n    if (pageBase && orig === path && (!isLocation || this._window.location.protocol !== 'file:')) {\n      return;\n    }\n\n    e.preventDefault();\n    this.show(orig);\n  };\n\n  /**\n   * Handle \"populate\" events.\n   * @api private\n   */\n\n  Page.prototype._onpopstate = (function () {\n    var loaded = false;\n    if ( ! hasWindow ) {\n      return function () {};\n    }\n    if (hasDocument && document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      var page = this;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else if (isLocation) {\n        var loc = page._window.location;\n        page.show(loc.pathname + loc.search + loc.hash, undefined, undefined, false);\n      }\n    };\n  })();\n\n  /**\n   * Event button.\n   */\n  Page.prototype._which = function(e) {\n    e = e || (hasWindow && this._window.event);\n    return null == e.which ? e.button : e.which;\n  };\n\n  /**\n   * Convert to a URL object\n   * @api private\n   */\n  Page.prototype._toURL = function(href) {\n    var window = this._window;\n    if(typeof URL === 'function' && isLocation) {\n      return new URL(href, window.location.toString());\n    } else if (hasDocument) {\n      var anc = window.document.createElement('a');\n      anc.href = href;\n      return anc;\n    }\n  };\n\n  /**\n   * Check if `href` is the same origin.\n   * @param {string} href\n   * @api public\n   */\n  Page.prototype.sameOrigin = function(href) {\n    if(!href || !isLocation) return false;\n\n    var url = this._toURL(href);\n    var window = this._window;\n\n    var loc = window.location;\n\n    /*\n       When the port is the default http port 80 for http, or 443 for\n       https, internet explorer 11 returns an empty string for loc.port,\n       so we need to compare loc.port with an empty string if url.port\n       is the default port 80 or 443.\n       Also the comparition with `port` is changed from `===` to `==` because\n       `port` can be a string sometimes. This only applies to ie11.\n    */\n    return loc.protocol === url.protocol &&\n      loc.hostname === url.hostname &&\n      (loc.port === url.port || loc.port === '' && (url.port == 80 || url.port == 443)); // jshint ignore:line\n  };\n\n  /**\n   * @api private\n   */\n  Page.prototype._samePath = function(url) {\n    if(!isLocation) return false;\n    var window = this._window;\n    var loc = window.location;\n    return url.pathname === loc.pathname &&\n      url.search === loc.search;\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   * @api private\n   */\n  Page.prototype._decodeURLEncodedURIComponent = function(val) {\n    if (typeof val !== 'string') { return val; }\n    return this._decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  };\n\n  /**\n   * Create a new `page` instance and function\n   */\n  function createPage() {\n    var pageInstance = new Page();\n\n    function pageFn(/* args */) {\n      return page.apply(pageInstance, arguments);\n    }\n\n    // Copy all of the things over. In 2.0 maybe we use setPrototypeOf\n    pageFn.callbacks = pageInstance.callbacks;\n    pageFn.exits = pageInstance.exits;\n    pageFn.base = pageInstance.base.bind(pageInstance);\n    pageFn.strict = pageInstance.strict.bind(pageInstance);\n    pageFn.start = pageInstance.start.bind(pageInstance);\n    pageFn.stop = pageInstance.stop.bind(pageInstance);\n    pageFn.show = pageInstance.show.bind(pageInstance);\n    pageFn.back = pageInstance.back.bind(pageInstance);\n    pageFn.redirect = pageInstance.redirect.bind(pageInstance);\n    pageFn.replace = pageInstance.replace.bind(pageInstance);\n    pageFn.dispatch = pageInstance.dispatch.bind(pageInstance);\n    pageFn.exit = pageInstance.exit.bind(pageInstance);\n    pageFn.configure = pageInstance.configure.bind(pageInstance);\n    pageFn.sameOrigin = pageInstance.sameOrigin.bind(pageInstance);\n    pageFn.clickHandler = pageInstance.clickHandler.bind(pageInstance);\n\n    pageFn.create = createPage;\n\n    Object.defineProperty(pageFn, 'len', {\n      get: function(){\n        return pageInstance.len;\n      },\n      set: function(val) {\n        pageInstance.len = val;\n      }\n    });\n\n    Object.defineProperty(pageFn, 'current', {\n      get: function(){\n        return pageInstance.current;\n      },\n      set: function(val) {\n        pageInstance.current = val;\n      }\n    });\n\n    // In 2.0 these can be named exports\n    pageFn.Context = Context;\n    pageFn.Route = Route;\n\n    return pageFn;\n  }\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page.call(this, '*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path), null, this);\n      for (var i = 1; i < arguments.length; ++i) {\n        this.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      this['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      this.start(path);\n    }\n  }\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n    var page = this;\n    var window = page._window;\n\n    if (page._hashbang) {\n      current = isLocation && this._getBase() + window.location.hash.replace('#!', '');\n    } else {\n      current = isLocation && window.location.pathname + window.location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    isLocation && (window.location.href = ctx.canonicalPath);\n  }\n\n  /**\n   * Escapes RegExp characters in the given string.\n   *\n   * @param {string} s\n   * @api private\n   */\n  function escapeRegExp(s) {\n    return s.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state, pageInstance) {\n    var _page = this.page = pageInstance || page;\n    var window = _page._window;\n    var hashbang = _page._hashbang;\n\n    var pageBase = _page._getBase();\n    if ('/' === path[0] && 0 !== path.indexOf(pageBase)) path = pageBase + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    var re = new RegExp('^' + escapeRegExp(pageBase));\n    this.path = path.replace(re, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = (hasDocument && window.document.title);\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? _page._decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = _page._decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = this.pathname = parts[0];\n      this.hash = _page._decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    var page = this.page;\n    var window = page._window;\n    var hashbang = page._hashbang;\n\n    page.len++;\n    if (hasHistory) {\n        window.history.pushState(this.state, this.title,\n          hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    var page = this.page;\n    if (hasHistory) {\n        page._window.history.replaceState(this.state, this.title,\n          page._hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options, page) {\n    var _page = this.page = page || globalPage;\n    var opts = options || {};\n    opts.strict = opts.strict || _page._strict;\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathToRegexp_1(this.path, this.keys = [], opts);\n  }\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) {\n        ctx.routePath = self.path;\n        return fn(ctx, next);\n      }\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    delete params[0];\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = this.page._decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Module exports.\n   */\n\n  var globalPage = createPage();\n  var page_js = globalPage;\n  var default_1 = globalPage;\n\npage_js.default = default_1;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (page_js);\n\n\n//# sourceURL=webpack://chatapp/./node_modules/page/page.mjs?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.js");
/******/ 	
/******/ })()
;